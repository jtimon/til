mode test

// Test for Bug #35: underscore _ variable should allow repeated declarations
// The _ variable is used to discard return values (per Bug #8 fix)
// Multiple _ := declarations should be allowed in the same scope

returns_value : func() returns I64 = {
    return 42
}

// Test multiple _ declarations at top-level scope
_ := returns_value()
_ := returns_value()

test_multiple_underscore_decls : proc() = {
    // Both _ declarations should work without "already declared" error inside functions too
    _ := returns_value()
    _ := returns_value()

    println("test_multiple_underscore_decls PASSED")
}

// Test multiple _ declarations with variadic function calls
// This tests a different code path in ccodegen (emit_variadic_call)
variadic_func : func(args: ..I64) returns I64 = {
    return args.len()
}

test_multiple_underscore_variadic : proc() = {
    // Multiple _ declarations with variadic calls should also work
    _ := variadic_func(1, 2, 3)
    _ := variadic_func(4, 5)

    println("test_multiple_underscore_variadic PASSED")
}

test_multiple_underscore_decls()
test_multiple_underscore_variadic()
