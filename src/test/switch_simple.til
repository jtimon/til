mode test

// Simple switch test for C codegen

Color := enum {
    Unknown,
    Red: I64,
    Green: Bool,
}

test_switch_with_payload := proc() {
    r := Color.Red(42)

    mut result := 0
    switch r {
    case Color.Red(n):
        result = n
    case Color.Green(b):
        result = 0
    case:
        result = 0
    }

    println("Switch with payload test passed")
}

test_switch_without_extraction := proc() {
    u := Color.Unknown

    mut result := 0
    switch u {
    case Color.Unknown:
        result = 1
    case Color.Red:
        result = 2
    case Color.Green:
        result = 3
    case:
        result = 0
    }

    println("Switch without extraction test passed")
}

test_switch_with_payload()
test_switch_without_extraction()
