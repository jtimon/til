mode test

// runfile("src/repl.til") // REM don't run this from the tests unless for debug

runfile("src/test/temporary_tests.til")

// Self-hosting interpreter tests
// TODO: Re-enable after fixing type errors in lexer.til and parser.til
// runfile("src/tests_self_hosted.til")

println("\nSome versions of 'hello world' in different basic modes:\n")

runfile("src/test/hello/hello_cli.til")
runfile("src/test/hello/hello_lib.til")
runfile("src/test/hello/hello_pure.til")
runfile("src/test/hello/hello_script.til")
// test a part of posix compatibility, it doesn't require the mode to be script, it can be compiled too, like roc
// Ideally we should benchmark against at least bash, python, roc, Rust, C and HolyC for this kind of mode, both interpreted and compiled
runfile("src/test/hello/hello_script_shebang.til")
// runfile("src/test/hello/hello_script_safe.til") // TODO this is much harder than it sounds
runfile("src/test/hello/hello_test.til")

println("\nSome basic tests/examples:\n")

// runfile("src/test/args.til") // TODO: Fix Dynamic mut parameter copy-back

// Fixed by Bug #4 fix (is_return propagation) - now passing:
runfile("src/test/arithmetics.til")
runfile("src/test/arrays.til")
// runfile("src/test/boolean.til") // FAILS after reverting false literal - Could not find function definition
runfile("src/test/branchless.til")
runfile("src/test/c_mem.til")
runfile("src/test/comparisons.til")
runfile("src/test/dynamic_arrays.til")
runfile("src/test/editor_mode_test.til")
runfile("src/test/fibonacci.til")
runfile("src/test/flow.til")
runfile("src/test/forward_declarations.til")
runfile("src/test/function_pointers.til")
runfile("src/test/func_purity.til")
runfile("src/test/mut_test.til")
runfile("src/test/u8.til")
runfile("src/test/variadic.til")

// Advanced tests also now passing:
runfile("src/test/eval.til")
runfile("src/test/introspections.til")

// Still failing - different bugs:
// runfile("src/test/enums.til") // FAILS - assert failed
// runfile("src/test/errors.til") // FAILS - assert failed
// runfile("src/test/intro.til") // FAILS - assert_eq_str (filepath issue)
// runfile("src/test/lists.til") // FAILS - Struct 'Vec' has no member 'type_sizes'
// runfile("src/test/maps.til") // FAILS - Struct 'Str' has no member 'key_type_name'
// runfile("src/test/modes.til") // FAILS - assert failed
// runfile("src/test/namespaces.til") // FAILS - bool not found for id 'b'
// runfile("src/test/pointers.til") // FAILS - Expected AllocError when calling Ptr.new_by_size(0)
// runfile("src/test/strings.til") // FAILS - expected 'abc', found 'abcbc'
// runfile("src/test/structs.til") // FAILS - assert failed
// runfile("src/test/test_lexer.til") // FAILS - garbled output
// runfile("src/test/test_parser.til") // FAILS - assert failed
// runfile("src/test/ufcs.til") // FAILS - parse error: Expected ')' or ',', found 'Dot'

// runfile("src/test/undefined.til") // Should produce compile-time errors for undefined types

// The closest to a std lib this language has:
// runfile("src/core.til") // REM you can't run it because it is already imported everywhere

runfile("src/test/todo.til") // permanent TODO

// REM test exit.til only at the end
runfile("src/test/exit.til")
