mode test

// C codegen tests

import("src.core.self.builder")

println("\n=== C Codegen Tests ===\n")

// Commented out for speed - these work but are slow with self-hosted builder
# test_hello_codegen := proc() {
#     println("Testing C codegen with hello_script.til...")
#     _ := build("src/test/hello/hello_script.til")
#     println("[PASS] hello_script.til codegen succeeded")
#     catch (err: Str) {
#         panic(loc(), format("C codegen test failed: ", err))
#     }
# }
# test_hello_codegen()

# test_arithmetics_codegen := proc() {
#     println("Testing C codegen with arithmetics.til...")
#     _ := build("src/test/arithmetics.til")
#     println("[PASS] arithmetics.til codegen succeeded")
#     catch (err: Str) {
#         panic(loc(), format("C codegen test failed: ", err))
#     }
# }
# test_arithmetics_codegen()

test_comparisons_codegen := proc() {
    println("Testing C codegen with comparisons.til...")
    _ := build("src/test/comparisons.til")
    println("[PASS] comparisons.til codegen succeeded")

    catch (err: Str) {
        panic(loc(), format("C codegen test failed: ", err))
    }
}

test_comparisons_codegen()

println("=== All C Codegen Tests Passed! ===\n")
