#+TITLE: Bot Guidelines for TIL Project
#+AUTHOR: JT (Human-maintained)
#+DATE: 2025-11-11

* IMPORTANT: DO NOT EDIT THIS FILE

This file is human-maintained. Bots must read and follow these guidelines but NEVER edit this file.

* Source of Truth

The human is the source of truth for all decisions. The bot's role is to:
- Execute tasks as requested
- Provide technical implementation
- Flag issues and ask questions when needed
- NOT make architectural or design decisions independently

* Writing Style for Documentation

** Concise over Verbose
- Keep documentation short and to the point
- Avoid over-explanation
- "Show me the code, don't explain it to me"

** Use Org-Mode Features, Not Unicode Decoration
- Use org-mode TODO states: TODO, DONE, FIXED
- Use org-mode checkboxes: [ ] and [X]
- Do NOT use Unicode decoration (emojis, box drawing, fancy bullets)
- Exception: Unicode is acceptable for future .html output files

** Avoid Verbose Property Drawers
- Keep :PROPERTIES: drawers minimal and focused
- Don't add excessive metadata
- Only include properties that serve a clear tracking purpose

** Checkbox vs TODO Usage
- Use checkboxes (- [ ], - [X]) for:
  - Sequential steps in a process
  - Simple task breakdowns
  - Lightweight tracking (not in global TODO agenda)
- Use TODO states (TODO, DONE, FIXED) for:
  - Higher-level workflow tracking
  - Items that need global TODO list visibility
  - Status requiring multiple states

* Encoding Rules

** ASCII-Only Files
These file types MUST use only ASCII characters:
- .til files (lexer enforces this - will error on Unicode)
- .rs files (will be translated to .til, keep clean)
- .el files (Emacs Lisp)
- .org files (documentation)

** Unicode-OK Files
Unicode is acceptable in:
- Future .html output files
- Binary data files (images, etc.)

* File Organization

** doc/*.org - Human-Maintained
All .org files directly in doc/ are human-maintained unless explicitly told otherwise.
Bot should read these files but NOT edit them without explicit permission.

Examples:
- doc/bot.org (this file)
- doc/bugs.org
- doc/dry.org

** doc/human/ - Human Reference Documentation
Human-maintained reference documentation and design notes.
Bot should read these files but NOT edit them without explicit permission.

Files:
- doc/human/terminology.org
- doc/human/design_notes.org
- doc/human/literal_syntax.org
- doc/human/syntax_bikeshedding.org

** doc/bot/ - Bot Workspace
Complete freedom for bot's own notes and workspace.
Bot can create, edit, delete files here as needed.
This directory is ignored by .gitignore.

Files:
- doc/bot/self_bot.org - Bot's self-notes
- doc/bot/temp_bot.org - Bot's temporary notes
- Any other files bot needs

** doc/todo/ - Shared Workspace
Both humans and bots use these files for task tracking.
Bot can edit these with normal workflow rules.

Files:
- doc/todo/todo_*.org files (moved from doc/)

** doc/log/ - Completed Plan Archive
Completed plan files from doc/todo/ are moved here for reference.
This directory is ignored by .gitignore.

When a plan is completed:
1. Use `mv doc/todo/plan.org doc/log/` to move the file
2. Use `git add doc/todo/plan.org` to stage the removal
3. Commit the removal (git sees it as deleted from tracked location)

Files:
- doc/log/ufcs.org - Completed UFCS migration plan

** src/test/tmp/ - Temporary Test Files
For test files that are NOT part of the test suite.
Use this for quick experiments, debugging, or one-off tests.
These files are not run by the test suite.
This directory is ignored by .gitignore.

** bots/ - Agent-Specific Instructions
Task-specific instruction files for specialized agents.
These files contain focused rules that get injected when specific agents are invoked.

Files:
- bots/debugger.org - Instructions for debugging/error clarification tasks

* Commit Guidelines

** Always Run Make Before Commits
- Run `make` before EVERY commit
- If exit code is 0: proceed with commit
- If exit code is non-zero: read full log, fix errors
- NEVER commit with failing tests

** Commit Messages
Simple and descriptive, following project patterns.

* Issue Numbering System

** Shared Counter
All tracking documents share issue numbers via doc/todo/next_issue_num.txt

** How to Assign New Issue Numbers
1. Read the current number from doc/todo/next_issue_num.txt
2. Use that number for your new issue (e.g., if file contains "28", use #28)
3. Increment the number in the file (e.g., update to "29")
4. Commit the updated next_issue_num.txt along with your changes

Example workflow:
#+BEGIN_EXAMPLE
# Read current number
$ cat doc/todo/next_issue_num.txt
28

# Use #28 for new bug in bugs.org
** Bug #28: Description here

# Update counter
$ echo "29" > doc/todo/next_issue_num.txt

# Commit both files
$ git add doc/todo/bugs.org doc/todo/next_issue_num.txt
#+END_EXAMPLE

** Never Reuse Numbers
Even when issues are fixed/resolved, their numbers remain documented.
This prevents confusion across different .org files.

* Terminology

** Functions (Generic)
"Functions" includes all callable constructs: func, proc, future macros

** Func and Proc (Specific)
- func: pure functions, must return, no side effects
- proc: procedures, may have side effects
- Use "func/proc" when discussing both explicitly

See doc/terminology.org for full details.

* Notes

- Created: 2025-11-11
- This is a living document that may be updated by humans
- Bots should re-read periodically for updates
